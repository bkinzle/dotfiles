#!/usr/bin/env bash
set -euo pipefail

SESSION="agent4pane"

# Attach if session already exists
if tmux has-session -t "$SESSION" 2>/dev/null; then
  exec tmux attach -t "$SESSION"
fi

# Create new detached session
tmux new-session -d -s "$SESSION"

# Create 2x2 grid
tmux split-window -h -t "$SESSION":0
tmux split-window -v -t "$SESSION":0.0
tmux split-window -v -t "$SESSION":0.1

# Set pane titles
tmux select-pane -t "$SESSION":0.0 -T "Agent 1"
tmux select-pane -t "$SESSION":0.1 -T "Agent 2"
tmux select-pane -t "$SESSION":0.2 -T "Agent 3"
tmux select-pane -t "$SESSION":0.3 -T "Agent 4"

# Optional: even out pane sizes
tmux select-layout -t "$SESSION":0 tiled

exec tmux attach -t "$SESSION"
